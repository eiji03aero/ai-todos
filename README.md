# ai todos
- This is the experimental project to explore the potential of cline.
- Basic policy
    - Never ever write a code yourself. Let the big guy take care of it all

---

# Documents
## Kinds of design files
- Application overview file
    - `docs/Application.md`
    - defines domain models
- Feature design file
    - `docs/features/[feature-name].md`
    - have file path to related to api / ui design file
- Api design file
    - `docs/apis/[api-name].md`
- Api spec file
    - `docs/openapi.yml`
    - to be updated based on api design file
- UI design document
    - `docs/pages/[page-name].md`

## How feature development works
- Create a feature design file
    - defines overview
    - list out domain models
- Create an api design to implement / update
    - design apis by creating documents
    - update openapi.yml file
    - append api design file path to the feature design file
- Create a ui design document
    - design pages by creating documents
    - append page design file path to the feature design file
- Implement apis
    - based on feature design file, implement api one by one
    - implement unit tests
- Implement pages
    - based on feature design file, implement page one by one

---

# Thoughts
- context windowが結構すぐ膨れるので、やり方に工夫がいるかも
    - ある程度の大きさで2-3分作業する単位でタスクをやらせるとか
- コードベースのセットアップは結構苦手かもしれない
    - 資料に書いてあるのと違うことやり始めたり、たぶんコンテキストウィンドウも膨らみがち
    - shadcn/uiのインストールは諦めた
        - https://ui.shadcn.com/docs/installation/tanstack
        - ページにしたがって、コマンドのコピペと指示で対応
    - 設定ファイルの編集はドキュメント見ながら、さすがにコピペした方が早いしお金もかからない
- 設計してもらうのに、設計方針を理解してもらう必要があるが、設計資料をしっかり書くと、理解してもらえた
    - docs/Frontend.mdにFSDのフォルダ構成を追記したら、適切にlayerを活用してくれる件
- architect mode -> code modeが使い勝手良さそう
    - architect modeで壁打ちをしながら実装方針を決める
    - fixした内容をdocs配下に残す
    - そのままcode modeに移行して実装をすすめる
- ちょっと不具合修正が苦手かも
    - docker containerで、npmパッケージが見つからないエラーがでて修正してもらおうとしたときに、あっちこっち行ってさっさと調査に移らなかった
    - これはmodelの良し悪しも関係あるかもしれない
    - ただし、以前出した指示を覚えていて、あとからでも拾ってくれるのは有能
    - そもそもdebugモードを使った方がいいかも
- tailwindのスタイルが当たらない件は直せなかった
    - コードから原因を推測するのはたしかに難しかったと思われる
- 設定ファイルにimportと設定値を追加するのがどうしてもうまくいかない
    - import文追加して終わりになっとる
- 外部ページの情報を読み込ませるときは、@ディレクティブを使う
- 問題の解決の際には、debugモードを使う
- Boomerang mode
    - まるばつゲームの実装をお願いした
    - 仕様検討の壁打ちからやってくれると思ったが、いきなり実装から取り掛かってしまった
        - 内容的に確認するまでもないと判断したのだろうか
    - 既存の機能を削除して、まるばつゲームと入れ替えてしまった。指示が悪かったかも
    - 実装はすぐできた。すげーぞこれ
    - だが、アプリの実装では、検討から丁寧にやるcustom modeが必要そう
- new_task tool
    - なぜか指定したつもりのゴールで終わらず、さらに同じsub_taskを作り続けようとする
        - apiの仕様詳細作成のタスクをやって、詳細を承認したら、また仕様詳細のサブタスクを作ろうとする
        - あああ、サブタスクを作るときに、そのカスタムモードで依頼していたため、そのモードのデフォルトの動作をなぞってしまっていたのが原因ぽい
- tasntack routerの設定変更
    - routeDirectoryをFSDに合わせたくて、ドキュメントのURLをつけてお願いしたが、pacakge.jsonやgen.tsファイルを見に行ったりして、こりゃあダメだという感じ
    - トレーニングされていない内容はとことん弱い
- インポートパスのリファクタ
    - フォルダを階層移動したので移動したファイルのインポートパスが無効になっているはずだから直しておいてとやったがうまくいかず
        - 一つ一つのファイルをLLM投げ始めた
        - 結局修正できず
    - tscを使ってやってとお願いした
- context windowの上限が厳しい
    - haikuの上限？で10kが実質上限となるが、これくらいだとapi一本作っている間に達してしまう
    - なのでtaskをうまいこと分割して、tokenが嵩張らないように進めていく必要がありそう
- やはりタスクを切るのに、明確なゴールを指定してあげないと行けなさそう
    - apiを実装してというタスクがあったときに、handlerまでやっておわりになってしまっていた
    - api serverに公開するためにapi routeを登録するところがまるまるぬけていた
- contextが足りていないとどうしても頓珍漢しがち
    - あとからdocker composeでマウントしたディレクトリがないことをしらず、pathを直そうとする
    - docker composeのリスタートが必要なのに
- 結局ライブラリの使い方を調べてあげる必要が出てくる
    - viteのenv varsの仕組みを使ってと言ったら、ほんとうにあるのかわからん書き方をし始めて、調べるハメに
- 厳密なコーディングルールを守らせるのは難しそう
    - rulesに書いておいても、import pathをbarrelから行わせられない
- openapi-fetchとの相性
    - どうにも、型を自動生成するためか、$api.useQueryなどの引数をうまく埋められない
    - 一発目は大体頓珍漢なことをする
    - とりあえずファイルを生成させて、typescriptエラーを確認させて、修正をさせるという選択肢はあるが、これも直せるとは限らない
- signupのフロントエンド実装
    - 結構メチャクチャなものが上がってきた
    - labelが2重
    - バリデーションエラーが最初から出ている
        - これはブラウザによるinput valueの保管によりバリデーションが走ってしまっていた模様
    - 言うまでもなくUIがいまいち
    - formは普通にpagesのuiに収めるのが良さそう
- 部分的なリファクタによる弊害
    - コンポーネントを切り出したところ、ナビゲーションのロジックが重複してしまった
    - もともとページコンポーネントで定義していたが、切り出した先のフォームにもリダイレクトのロジックを載せてしまった。こういうのは、PR単位のレビューでないとふせぎにくい。ファイル単位で変更を見せられてもふんふんいっていると見逃してしまう
- 開発の切り口
    -　今の所、機能単位で開発を始める想定だが
    - 実装都合という切り口もあるかも
        - appState的な
- 結合した時の修正が結局必要かつ面倒
    - api作って、フロントつくって結合して動作確認の手順が必要
    - 結合試験もやらせてしまいたいが・・・

---

# Todo
## Backlog
- [ ] Login
    - [ ] unify the designer mode into one awesome-designer
    - [ ] api
        - make sure to implement cookie authentication
        - implement appState endpoint to retrieve user info
    - [ ] ui
- [ ] Top page
- [ ] Nav layout
- [ ] Create todo
- [ ] Mark todo done
- [ ] Edit todo
- [ ] Delete todo
- [ ] List and search todo
- [ ] Create project
- [ ] Edit project
- [ ] Delete project
- [ ] List and search Project
- [ ] Project detail
- [ ] update list and search todo
    - search by project
- [ ] Create tag
- [ ] Edit tag
- [ ] Delete tag
- [ ] update todo to attach
- [ ] update list and search todo
    - search by tag

## Done
- [x] Signup
    - [x] api
        - implement awesome-engineer role as well
    - [x] ui
        - implement awesome-engineer role as well
- [x] implement barney stinson mode
- [x] implement centered form layout
- [x] install all the shadcn components
- [x] create roadmap
    - list out features
- [x] try out boomerang mode
- [x] fix websocket error for local dev server
- [x] play around the architect mode
    - implement helloworlder
- [x] implement sample codebase
    - try to use custom instruction to make it read spec documents
        - .roo/rules
    - [x] api
        - get helloworld
    - [x] client
        - top helloworld
- [x] Implement local environment
    - docker compose
    - docker container
- [x] Create base for Application spec
- [x] Consider how to proceed with the development
- [x] Base of codebase
    - Codebase document
        - top level folders
        - backend (tech stack, folder structure)
        - frontend (tech stack, folder structure)